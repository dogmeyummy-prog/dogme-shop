<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dogme | æˆ‘çš„åˆ¸åŒ… ğŸ¾</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Quicksand', sans-serif; }
        .active-press:active { transform: scale(0.96); }

        .coupon-card {
            position: relative;
            background: white;
            border-radius: 30px;
            overflow: hidden;
            transition: all 0.3s ease;
        }
        .coupon-card::before, .coupon-card::after {
            content: ''; position: absolute; width: 20px; height: 20px;
            background: #fdfcf9; border-radius: 50%; top: 50%; transform: translateY(-50%);
            z-index: 10;
        }
        .coupon-card::before { left: -10px; }
        .coupon-card::after { right: -10px; }

        .theme-v1-v2 { background: #f8f9fa; color: #2d3436; }
        .theme-v6-v8 { background: linear-gradient(135deg, #6c5ce7 0%, #3a327a 100%); color: white; }
        .theme-v9 { background: linear-gradient(135deg, #2d3436 0%, #000000 100%); color: white; }
        .theme-v10 { background: linear-gradient(135deg, #f1c40f 0%, #d35400 100%); color: white; }

        .particle {
            position: absolute; width: 4px; height: 4px; border-radius: 50%;
            background: currentColor; opacity: 0.3; pointer-events: none;
            animation: float-up 3s infinite linear;
        }
        @keyframes float-up {
            0% { transform: translateY(0); opacity: 0.5; }
            100% { transform: translateY(-100px); opacity: 0; }
        }

        .wing-icon { font-size: 20px; opacity: 0.8; }
    </style>
</head>
<body class="bg-[#fdfcf9] min-h-screen pb-20">

    <!-- æ·»åŠ è¯­è¨€åˆ‡æ¢æŒ‰é’®å’Œç¿»è¯‘å±æ€§ -->
    <nav class="flex justify-between items-center px-6 md:px-8 py-6 sticky top-0 z-50 bg-white/70 backdrop-blur-xl border-b border-orange-50">
        <button onclick="history.back()" class="w-10 h-10 md:w-11 md:h-11 rounded-2xl bg-white shadow-sm flex items-center justify-center text-orange-500 active-press border border-orange-50">â®</button>
        <div class="flex flex-col items-center">
            <h1 class="text-lg md:text-xl font-black text-gray-900 tracking-tighter" data-t="coupon_title">æˆ‘çš„åˆ¸åŒ…</h1>
            <span id="rank-indicator" class="text-[9px] font-black text-orange-500 uppercase tracking-widest">Level V1</span>
        </div>
        <div class="flex items-center gap-2">
            <div class="flex bg-gray-100 rounded-xl overflow-hidden">
                <button onclick="switchLanguage('zh')" id="lang-zh" class="px-2 py-1.5 text-[8px] md:text-[9px] font-black uppercase tracking-wider transition-colors">ä¸­æ–‡</button>
                <button onclick="switchLanguage('en')" id="lang-en" class="px-2 py-1.5 text-[8px] md:text-[9px] font-black uppercase tracking-wider transition-colors">EN</button>
                <button onclick="switchLanguage('fr')" id="lang-fr" class="px-2 py-1.5 text-[8px] md:text-[9px] font-black uppercase tracking-wider transition-colors">FR</button>
            </div>
        </div>
    </nav>

    <main class="max-w-md mx-auto px-6 mt-8">
        
        <div id="privilege-banner" class="p-6 rounded-[35px] mb-8 relative overflow-hidden transition-all duration-700">
            <div id="particle-container" class="absolute inset-0"></div>
            <div class="relative z-10 flex justify-between items-center">
                <div>
                    <h2 class="font-black text-base md:text-lg" data-t="coupon_privilege_banner">ç­‰çº§ç‰¹æƒåŒ…</h2>
                    <p id="privilege-desc" class="text-xs font-bold opacity-70" data-t="coupon_privilege_desc">å‡çº§è§£é”æ›´å¤šé«˜é¢ç¥åˆ¸</p>
                </div>
                <div class="flex gap-2">
                    <span id="wing-l" class="wing-icon">ğŸ•Šï¸</span>
                    <span id="wing-r" class="wing-icon">ğŸ•Šï¸</span>
                </div>
            </div>
        </div>

        <div id="coupon-list" class="space-y-6">
            <div class="coupon-card shadow-sm border border-orange-100 flex items-center p-4 md:p-6">
                <div class="flex-1 border-r-2 border-dashed border-gray-100 pr-4 md:pr-6">
                    <span class="text-[10px] font-black text-orange-500 uppercase" data-t="coupon_welcome_gift">Welcome Gift</span>
                    <h3 class="text-2xl md:text-3xl font-black text-gray-800">8.0 <span class="text-sm" data-t="coupon_discount">æŠ˜</span></h3>
                    <p class="text-[10px] font-bold text-gray-400" data-t="coupon_min_spend">å…¨åœºæ»¡ $10 å¯ç”¨</p>
                </div>
                <div class="pl-4 md:pl-6">
                    <button onclick="location.href='shopping.html'" class="bg-gray-900 text-white px-3 md:px-4 py-2 rounded-xl text-xs font-black active-press hover:bg-orange-500 transition-all" data-t="coupon_use_btn">å»ä½¿ç”¨</button>
                </div>
            </div>

            <div id="v6-exclusive" class="hidden coupon-card bg-indigo-600 text-white p-4 md:p-6 flex items-center shadow-xl">
                <div class="flex-1 border-r-2 border-dashed border-white/20 pr-4 md:pr-6">
                    <span class="text-[10px] font-black text-yellow-300 uppercase" data-t="coupon_elite_reward">Elite Reward</span>
                    <h3 class="text-xl md:text-2xl font-black"><span data-t="coupon_off">ç«‹å‡</span> $15</h3>
                    <p class="text-[10px] font-bold opacity-70" data-t="coupon_elite_desc">V6 çº§ä»¥ä¸Šä¸“äº«</p>
                </div>
                <div class="pl-4 md:pl-6">
                    <button class="bg-white text-indigo-600 px-3 md:px-4 py-2 rounded-xl text-xs font-black active-press" data-t="coupon_claim_btn">é¢†å–</button>
                </div>
            </div>

            <div id="v9-exclusive" class="hidden coupon-card bg-black text-white p-4 md:p-6 flex items-center shadow-2xl ring-2 ring-gray-800">
                <div class="flex-1 border-r-2 border-dashed border-white/20 pr-4 md:pr-6">
                    <span class="text-[10px] font-black text-orange-500 uppercase" data-t="coupon_legendary">Legendary Privilege</span>
                    <h3 class="text-2xl md:text-3xl font-black text-white">8.0 <span class="text-sm" data-t="coupon_discount">æŠ˜</span></h3>
                    <p class="text-[10px] font-bold opacity-70 mt-1" data-t="coupon_legendary_desc">V9 æ°¸ä¹…ç‰¹æƒï¼šæ¯ç¬”è®¢å•è‡ªåŠ¨äº« 2% å‡å… âš¡</p>
                </div>
                <div class="pl-4 md:pl-6 flex flex-col items-center">
                    <span class="text-xl mb-1">ğŸ‘‘</span>
                    <span class="text-[9px] font-black text-orange-500" data-t="coupon_activated">å·²æ¿€æ´»</span>
                </div>
            </div>
        </div>

        <p class="text-center text-gray-300 text-[10px] font-bold mt-12" data-t="coupon_footer">â€”â€” æ›´å¤šä¼˜æƒ æ´»åŠ¨è¯·ç•™æ„ Dogme é¦–é¡µå…¬å‘Š â€”â€”</p>
    </main>

    <!-- å¼•å…¥ i18n.js -->
    <script src="i18n.js"></script>
    
    <script>
        function updateLanguageButtons() {
            const lang = localStorage.getItem('dogme_lang') || 'zh';
            ['zh', 'en', 'fr'].forEach(l => {
                const btn = document.getElementById(`lang-${l}`);
                if (l === lang) {
                    btn.classList.add('bg-gray-900', 'text-white');
                    btn.classList.remove('text-gray-400');
                } else {
                    btn.classList.remove('bg-gray-900', 'text-white');
                    btn.classList.add('text-gray-400');
                }
            });
        }

        function updateCouponPage() {
            const exp = parseInt(localStorage.getItem('dogme_user_exp') || "0");
            const level = Math.min(Math.floor(exp / 10) + 1, 10);
            
            const banner = document.getElementById('privilege-banner');
            const indicator = document.getElementById('rank-indicator');
            const wingL = document.getElementById('wing-l');
            const wingR = document.getElementById('wing-r');
            const pDesc = document.getElementById('privilege-desc');

            indicator.innerText = `Level V${level}`;

            if (level <= 2) {
                banner.classList.add('theme-v1-v2');
                wingL.style.display = wingR.style.display = 'none';
            } else {
                wingL.style.display = wingR.style.display = 'block';
                if (level <= 5) {
                    banner.classList.add('theme-v6-v8');
                    pDesc.setAttribute('data-t', 'coupon_v6_desc');
                } else if (level <= 8) {
                    banner.classList.add('theme-v6-v8');
                    document.getElementById('v6-exclusive').classList.remove('hidden');
                    pDesc.setAttribute('data-t', 'coupon_v8_desc');
                } else if (level === 9) {
                    banner.classList.add('theme-v9');
                    document.getElementById('v6-exclusive').classList.remove('hidden');
                    document.getElementById('v9-exclusive').classList.remove('hidden');
                    pDesc.setAttribute('data-t', 'coupon_v9_desc');
                } else {
                    banner.classList.add('theme-v10');
                    document.getElementById('v6-exclusive').classList.remove('hidden');
                    document.getElementById('v9-exclusive').classList.remove('hidden');
                    wingL.innerText = wingR.innerText = 'ğŸ‘‘';
                    pDesc.setAttribute('data-t', 'coupon_v10_desc');
                }
            }
            
            // é‡æ–°åº”ç”¨è¯­è¨€
            const lang = localStorage.getItem('dogme_lang') || 'zh';
            switchLanguage(lang);
        }

        function createParticles() {
            const container = document.getElementById('particle-container');
            setInterval(() => {
                const p = document.createElement('div');
                p.className = 'particle';
                p.style.left = Math.random() * 100 + '%';
                p.style.bottom = '0px';
                container.appendChild(p);
                setTimeout(() => p.remove(), 3000);
            }, 400);
        }

        window.onload = () => {
            updateCouponPage();
            createParticles();
            updateLanguageButtons();
        };
    </script>

    <!-- Vercel Speed Insights -->
    <script>
        window.si = window.si || function () { (window.siq = window.siq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/speed-insights/script.js"></script>
</body>
</html>

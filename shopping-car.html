<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dogme | æˆ‘çš„è´­ç‰©è½¦ ğŸ¾</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="æµ‹è¯•ç‰ˆ.css">
    <style>
        .cart-item { transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .cart-item:hover { transform: translateX(10px); }
        .active-press:active { transform: scale(0.95); }
        .dashed-line { border-top: 2px dashed #f3f4f6; }
    </style>
</head>
<body class="bg-[#fdfcf9] min-h-screen pb-32">

    <nav class="flex justify-between items-center px-8 py-6 sticky top-0 z-50 bg-white/70 backdrop-blur-xl border-b border-orange-50">
        <div class="flex items-center gap-4">
            <button onclick="history.back()" class="w-11 h-11 rounded-2xl bg-white shadow-sm flex items-center justify-center text-orange-500 active-press border border-orange-50">â®</button>
            <h1 class="text-2xl font-black text-gray-900 tracking-tighter">Shopping Car.</h1>
        </div>
        <button onclick="clearCart()" class="text-xs font-black text-gray-400 hover:text-red-500 transition-colors uppercase tracking-widest">æ¸…ç©ºå…¨éƒ¨</button>
    </nav>

    <main class="max-w-3xl mx-auto px-6 mt-10">
        <div id="cart-list" class="space-y-4">
            </div>

        <div id="empty-hint" class="hidden text-center py-20">
            <div class="text-6xl mb-6">ğŸ›’</div>
            <h2 class="text-xl font-bold text-gray-400">è´­ç‰©è½¦ç©ºç©ºå¦‚ä¹Ÿ...</h2>
            <button onclick="location.href='shopping.html'" class="mt-6 px-8 py-3 bg-orange-500 text-white rounded-2xl font-black active-press">å»é€›é€›</button>
        </div>

        <div id="checkout-panel" class="mt-12 bg-white p-8 rounded-[40px] shadow-sm border border-orange-50">
            <h3 class="font-black text-gray-800 mb-6 text-lg">è´¹ç”¨æ˜ç»† (Vancouver, BC)</h3>
            
            <div class="space-y-4">
                <div class="flex justify-between font-bold text-gray-500">
                    <span>å•†å“å°è®¡ (Subtotal)</span>
                    <span id="subtotal">$0.00</span>
                </div>
                <div class="flex justify-between text-sm font-bold text-gray-400">
                    <span>GST (5%)</span>
                    <span id="tax-gst">$0.00</span>
                </div>
                <div class="flex justify-between text-sm font-bold text-gray-400">
                    <span>PST (7%)</span>
                    <span id="tax-pst">$0.00</span>
                </div>
                
                <div class="dashed-line pt-4 flex justify-between items-end">
                    <div>
                        <span class="block text-[10px] font-black text-orange-500 uppercase tracking-widest">Total Amount</span>
                        <span class="text-3xl font-black text-gray-900">æ€»è®¡ä»·æ ¼</span>
                    </div>
                    <span id="total-price" class="text-4xl font-black text-orange-500">$0.00</span>
                </div>
            </div>

            <button onclick="handlePay()" class="w-full mt-10 py-5 bg-gray-900 text-white rounded-[25px] font-black text-xl active-press shadow-xl hover:bg-orange-600 transition-all flex items-center justify-center gap-3">
                å‰å¾€æ”¯ä»˜ <span>â†’</span>
            </button>
        </div>
    </main>

    <script>
        const GST_RATE = 0.05;
        const PST_RATE = 0.07;

        function loadCart() {
            const cart = JSON.parse(localStorage.getItem('dogme_cart')) || [];
            const listContainer = document.getElementById('cart-list');
            const emptyHint = document.getElementById('empty-hint');
            const checkoutPanel = document.getElementById('checkout-panel');

            if (cart.length === 0) {
                listContainer.innerHTML = '';
                emptyHint.classList.remove('hidden');
                checkoutPanel.classList.add('hidden');
                return;
            }

            emptyHint.classList.add('hidden');
            checkoutPanel.classList.remove('hidden');

            let subtotal = 0;
            listContainer.innerHTML = cart.map((item, index) => {
                subtotal += item.price;
                return `
                    <div class="cart-item bg-white p-5 rounded-[30px] flex items-center justify-between border border-transparent hover:border-orange-100 shadow-sm">
                        <div class="flex items-center gap-5">
                            <div class="w-16 h-16 bg-gray-50 rounded-2xl flex items-center justify-center text-3xl">${item.emoji}</div>
                            <div>
                                <h4 class="font-black text-gray-800">${item.name}</h4>
                                <p class="text-orange-500 font-bold">$${item.price.toFixed(2)}</p>
                            </div>
                        </div>
                        <button onclick="removeItem(${index})" class="w-10 h-10 rounded-full bg-gray-50 text-gray-300 hover:bg-red-50 hover:text-red-500 transition-all font-bold">âœ•</button>
                    </div>
                `;
            }).join('');

            // è®¡ç®—ç¨è´¹
            const gst = subtotal * GST_RATE;
            const pst = subtotal * PST_RATE;
            const total = subtotal + gst + pst;

            document.getElementById('subtotal').innerText = `$${subtotal.toFixed(2)}`;
            document.getElementById('tax-gst').innerText = `$${gst.toFixed(2)}`;
            document.getElementById('tax-pst').innerText = `$${pst.toFixed(2)}`;
            document.getElementById('total-price').innerText = `$${total.toFixed(2)}`;
        }

        function removeItem(index) {
            let cart = JSON.parse(localStorage.getItem('dogme_cart')) || [];
            cart.splice(index, 1);
            localStorage.setItem('dogme_cart', JSON.stringify(cart));
            loadCart();
        }

        function clearCart() {
            if(confirm("ç¡®å®šè¦æ¸…ç©ºè´­ç‰©è½¦å—ï¼ŸğŸ¾")) {
                localStorage.removeItem('dogme_cart');
                loadCart();
            }
        }

        function handlePay() {
            alert("æ­£åœ¨è·³è½¬è‡³æ”¯ä»˜åŠ å¯†é€šé“... ğŸ¾");
            // è¿™é‡Œå¯ä»¥è·³è½¬åˆ°çœŸæ­£çš„æ”¯ä»˜é¡µé¢
        }

        window.onload = loadCart;
    </script>
</body>
</html>
index.html<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dogme Pay | å®‰å…¨æ”¯ä»˜ ğŸ’³</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Quicksand', sans-serif; background: #fdfcf9; }
        .pay-card { background: white; border-radius: 40px; box-shadow: 0 20px 40px rgba(0,0,0,0.05); }
        .active-press:active { transform: scale(0.95); }
        .success-anim { animation: scaleIn 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes scaleIn { from { transform: scale(0.5); opacity: 0; } to { transform: scale(1); opacity: 1; } }
    </style>
</head>
<body class="min-h-screen flex items-center justify-center p-6">

    <div class="w-full max-w-md">
        <div class="pay-card p-10 text-center">
            <div class="text-6xl mb-6">ğŸ’³</div>
            <h2 class="text-2xl font-black text-gray-800 mb-2">è®¢å•æ”¯ä»˜</h2>
            <p class="text-gray-400 font-bold mb-8 uppercase tracking-widest text-xs">Secure Checkout</p>
            
            <div class="bg-gray-50 rounded-3xl p-6 mb-8">
                <p class="text-sm text-gray-400 font-bold mb-1">åº”ä»˜æ€»é¢</p>
                <h1 id="pay-amount" class="text-4xl font-black text-gray-900">$0.00</h1>
            </div>

            <div class="space-y-3">
                <button onclick="handlePay()" id="confirm-pay" class="w-full py-5 bg-gray-900 text-white rounded-[25px] font-black text-lg active-press shadow-xl">
                    ç¡®è®¤æ”¯ä»˜
                </button>
                <button onclick="history.back()" class="w-full py-4 text-gray-400 font-bold text-sm">å–æ¶ˆå¹¶è¿”å›</button>
            </div>
        </div>

        <div id="success-overlay" class="fixed inset-0 bg-white z-50 flex flex-col items-center justify-center hidden">
            <div class="success-anim text-center">
                <div class="text-8xl mb-6">âœ…</div>
                <h2 class="text-3xl font-black text-gray-900 mb-2">æ”¯ä»˜æˆåŠŸ!</h2>
                <p id="exp-gain-msg" class="text-orange-500 font-bold mb-10">è·å¾— +0 ç»éªŒå€¼ ğŸ¾</p>
                <button onclick="location.href='index.html'" class="px-12 py-4 bg-gray-900 text-white rounded-2xl font-black active-press">å›åˆ°ä¸»é¡µ</button>
            </div>
        </div>
    </div>

    <script src="dogme-core.js"></script>
    <script>
        window.onload = () => {
            const amount = localStorage.getItem('dogme_pending_total') || "$0.00";
            document.getElementById('pay-amount').innerText = amount;
        };

        function handlePay() {
            const btn = document.getElementById('confirm-pay');
            btn.innerText = "å¤„ç†ä¸­...";
            btn.disabled = true;

            setTimeout(() => {
                // 1. è®¡ç®—ç»éªŒå¥–åŠ± (æ¯ $1 = 1 EXP)
                const amountStr = document.getElementById('pay-amount').innerText.replace('$', '');
                const expGained = Math.floor(parseFloat(amountStr));
                
                // 2. æ›´æ–°æœ¬åœ°ç»éªŒå­˜å‚¨
                let currentExp = parseFloat(localStorage.getItem('dogme_user_exp') || '0');
                localStorage.setItem('dogme_user_exp', currentExp + expGained);
                
                // 3. æ¸…ç©ºè´­ç‰©è½¦
                localStorage.removeItem('dogme_cart');
                localStorage.removeItem('dogme_pending_total');

                // 4. æ˜¾ç¤ºæˆåŠŸåŠ¨ç”»
                document.getElementById('exp-gain-msg').innerText = `è·å¾— +${expGained} ç»éªŒå€¼ ğŸ¾`;
                document.getElementById('success-overlay').classList.remove('hidden');
                
                // è§¦å‘æ ¸å¿ƒåˆå§‹åŒ–ï¼Œç¡®ä¿ç­‰çº§å³æ—¶è®¡ç®—
                if(typeof DogmeCore !== 'undefined') DogmeCore.init();
            }, 1500);
        }
    </script>
</body>
</html>